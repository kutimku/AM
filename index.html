<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>P2H Form</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 10px;
    }

    .item-row {
      margin-bottom: 20px;
      border-bottom: 1px solid #ccc;
      padding-bottom: 10px;
    }

    .item-name {
      font-size: 15px;
      font-weight: bold;
      margin-bottom: 8px;
    }

    .radio-group {
      display: flex;
      gap: 15px;
      margin-bottom: 10px;
    }

    .radio-group label {
      display: flex;
      align-items: center;
      gap: 5px;
      font-weight: normal;
    }

    .keterangan-rusak {
      display: none;
      margin-top: 5px;
    }

    input[type="text"], input[type="date"] {
      width: 100%;
      padding: 5px;
      margin-bottom: 10px;
    }

    .submit-btn {
      padding: 10px 20px;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h2>Form Pemeriksaan P2H</h2>
  <form id="p2hForm">
    <label>Tanggal: <input type="date" name="tanggal" required></label><br>
    <label>No. ID: <input type="text" name="id" required></label><br>
    <label>Unit / Alat:
  <select name="unit" id="unitSelect" required>
    <option value="">-- Pilih Unit --</option>
    <option value="AM129">AM129</option>
    <option value="AM71">AM71</option>
    <option value="AM84">AM84</option>
    <option value="AM85">AM85</option>
    <option value="AM87">AM87</option>
    <option value="AM94">AM94</option>
    <option value="AMLV105">AMLV105</option>
    <option value="AMLV106">AMLV106</option>
    <option value="AMLV107">AMLV107</option>
    <option value="AMLV108">AMLV108</option>
    <option value="AMLV109">AMLV109</option>
    <option value="AMLV111">AMLV111</option>
    <option value="AMLV112">AMLV112</option>
    <option value="AMLV113">AMLV113</option>
    <option value="AMLV114">AMLV114</option>
    <option value="AMLV115">AMLV115</option>
    <option value="AMLV122">AMLV122</option>
    <option value="AMLV123">AMLV123</option>
    <option value="AMLV124">AMLV124</option>
    <option value="AMLV125">AMLV125</option>
    <option value="AMLV128">AMLV128</option>
    <option value="AMLV130">AMLV130</option>
    <option value="AMLV134">AMLV134</option>
    <option value="AMLV135">AMLV135</option>
    <option value="AMLV150">AMLV150</option>
    <option value="AMLV151">AMLV151</option>
    <option value="AMLV155">AMLV155</option>
    <option value="AMLV156">AMLV156</option>
    <option value="AMLV159">AMLV159</option>
    <option value="AMLV75">AMLV75</option>
    <option value="AMLV80">AMLV80</option>
    <option value="AMLV88">AMLV88</option>
    <option value="AMLV89">AMLV89</option>
    <option value="AMLV91">AMLV91</option>
    <option value="AMLV92">AMLV92</option>
    <option value="AMLV93">AMLV93</option>
  </select>
</label>

   <p class="keterangan"><strong>Keterangan:</strong> B = Bagus, R = Rusak, NA = Tidak Diperlukan</p>
    <div id="itemsContainer"></div>

    <button type="submit" class="submit-btn">Kirim</button>
  </form>

  <script>
    const items = [
      "Kondisi Kemudi",
      "Sabuk pengaman",
      "*Rem kaki & tangan <7 klik*",
      "Lampu depan/kota/sein/atas/rotari",	
      "Lampu belakang/stop/sein",
      "Alarm mundur",
      "Air radiator",
      "Oli Mesin",
      "Minyak rem & power steering",
      "Fun belt",
      "Air pembersih kaca",
      "Jarum penunjuk berfungsi",
      "Lampu indikator",
      "Kondisi ban",
      "Wiper, Spion",	
      "Klakson",
      "Nomor kendaraan & pita reflektor",
      "Stiker next service",
      "Segi tiga pengaman",
      "Dongkrak & Kunci roda",
      "Alat Pemadam",
      "Kotak P3K",
      "Tempat tiang bendera",
      "Radio Komunikasi"
    ];

    const container = document.getElementById('itemsContainer');

    items.forEach((item, index) => {
      const itemId = `item_${index}`;
      const div = document.createElement('div');
      div.className = 'item-row';
      div.innerHTML = `
        <div class="item-name">${item}</div>
        <div class="radio-group">
          <label><input type="radio" name="${itemId}" value="B"> B</label>
          <label><input type="radio" name="${itemId}" value="R"> R</label>
          <label><input type="radio" name="${itemId}" value="NA"> NA</label>
        </div>
        <div class="keterangan-rusak" id="ket_${itemId}">
          <input type="text" name="ket_${itemId}" placeholder="Tulis keterangan kerusakan...">
        </div>
      `;
      container.appendChild(div);

      // Event listener saat memilih R
      div.querySelectorAll(`input[name="${itemId}"]`).forEach(radio => {
        radio.addEventListener('change', () => {
          const ketBox = document.getElementById(`ket_${itemId}`);
          if (radio.value === 'R') {
            ketBox.style.display = 'block';
          } else {
            ketBox.style.display = 'none';
          }
        });
      });
    });
  </script>
<button type="button" onclick="downloadTXT()">Simpan Bukti ke HP (.txt)</button>

<script>
function downloadTXT() {
   console.log("Tombol ditekan!"); // Tambahin ini
  const tanggal = document.querySelector('input[name="tanggal"]').value;
  const id = document.querySelector('input[name="id"]').value;
  const unit = document.querySelector('input[name="unit"]').value;
  
  let hasil = `Bukti Pemeriksaan P2H\n`;
  hasil += `Tanggal: ${tanggal}\nID: ${id}\nUnit: ${unit}\n\n`;

  const radios = document.querySelectorAll('input[type="radio"]:checked');
  radios.forEach(radio => {
    const itemLabel = radio.closest('tr').querySelector('td:nth-child(2)').textContent.trim();
    const nilai = radio.value;
    hasil += `${itemLabel}: ${nilai}\n`;

    const inputKet = radio.closest('tr').querySelector('input[type="text"]');
    if (nilai === "R" && inputKet && inputKet.value.trim() !== "") {
      hasil += `  Keterangan: ${inputKet.value.trim()}\n`;
    }
  });

  const blob = new Blob([hasil], { type: "text/plain" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = `P2H_${unit}_${tanggal}.txt`;
  a.click();
  URL.revokeObjectURL(url);
}
</script>

  
</body>
</html>
